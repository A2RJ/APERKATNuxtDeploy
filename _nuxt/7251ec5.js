(window.webpackJsonp=window.webpackJsonp||[]).push([[37,14],{349:function(e,t,n){var content=n(351);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(57).default)("150a8ba8",content,!0,{sourceMap:!1})},350:function(e,t,n){"use strict";n(349)},351:function(e,t,n){var r=n(56)(!1);r.push([e.i,"table#table-transition-example .flip-list-move{transition:transform 1s}",""]),e.exports=r},352:function(e,t,n){"use strict";n.r(t);n(5),n(4),n(6),n(3),n(7);var r=n(0),l=(n(2),n(1),n(46));function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={props:["items","fields","html","perYearFilterState","tableName","actions"],data:function(){return{transProps:{name:"flip-list"},id:this.html,fieldsTable:["index"],selectMode:"multi",selected:[],selectAll:!1,checked:!0,currentPage:1,perPage:10,pageOptions:[10,15,20,25,{value:100,text:"Show a lot"}],filter:null,countRows:0,perYear:"",yearOption:[]}},computed:c({totalRows:function(){var e=this;return""==this.perYear?this.items.length:this.items.filter((function(t){return t.period.substring(0,4)==e.perYear})).length}},Object(l.d)("customTable",{success:function(e){return e.success},errors:function(e){return e.errors}})),mounted:function(){for(var e=0;e<this.fields.length;e++)this.fieldsTable.push(this.fields[e]);this.filterYear()},methods:c(c({},Object(l.b)("customTable",["action"])),{},{reload:function(e){this.items=e},onRowSelected:function(e){this.selected=e},selectAllRows:function(){this.$refs.selectableTable.selectAllRows(),this.selectAll=!0},clearSelected:function(){this.$refs.selectableTable.clearSelected(),this.selectAll=!1},onFiltered:function(e){this.countRows=e.length,this.currentPage=1},toCellName:function(slot){return"cell(".concat(slot,")")},getAllSelected:function(){for(var a=[],e=0;e<this.selected.length;e++)a.push(this.selected[e][this.id]);return a},functionIndex:function(e,link){if("deleteAll"==e)this.$parent.deleteAll();else if("print"==e){for(var t=[],n=0;n<this.items.length;n++)t.push(this.items[n][this.id]);this.$parent.print(t)}else if("importRKAT"==e)this.$parent.importRKAT();else if("selectAll"==e)this.selectAllRows();else if("clearSelected"==e)this.clearSelected();else if("deleteSelected"==e){this.getAllSelected().length>0&&this.$parent.deleteRows(this.getAllSelected())}else if("printSelected"==e){this.getAllSelected().length>0&&this.$parent.print(this.getAllSelected())}},filterYear:function(){for(var e=(new Date).getFullYear(),t=[{value:"",text:"All"}],n=2021;n<=e;n++)t.push({value:n,text:n});this.yearOption=t,this.perYear=e}}),watch:{selectAll:function(){this.selectAll?this.selectAllRows():this.clearSelected()},items:function(){this.filterYear()}}},f=(n(350),n(44)),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{staticClass:"my-1",attrs:{lg:"6"}},e._l(e.actions,(function(t){return n("span",{key:t.name},["link"==t.type?n("NuxtLink",{class:t.color,attrs:{to:t.link}},[e._v(e._s(t.name))]):n("button",{class:t.color,attrs:{size:"sm"},on:{click:function(n){return e.functionIndex(t.func)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])],1)})),0),e._v(" "),n("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[n("b-row",[n("b-col",{staticClass:"my-1",attrs:{lg:"4"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"years","label-cols-sm":"6","label-cols-md":"4","label-cols-6":"","label-align-sm":"right","label-size":"sm"}},[n("b-form-select",{attrs:{id:"years",options:e.yearOption,size:"sm"},model:{value:e.perYear,callback:function(t){e.perYear=t},expression:"perYear"}})],1)],1),e._v(" "),n("b-col",{staticClass:"my-1",attrs:{lg:"4"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-for":"per-page-select","label-cols-sm":"6","label-cols-md":"4","label-cols-6":"","label-align-sm":"right","label-size":"sm"}},[n("b-form-select",{attrs:{id:"per-page-select",options:e.pageOptions,size:"sm"},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1),e._v(" "),n("b-col",{staticClass:"my-1",attrs:{lg:"4"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),n("b-input-group-append",[n("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")])],1)],1)],1)],1)],1)],1)],1),e._v(" "),n("b-table",{ref:"selectableTable",attrs:{items:""==e.perYear?e.items:e.items.filter((function(t){return t.period.substring(0,4)==e.perYear})),fields:e.fieldsTable,"select-mode":e.selectMode,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,bordered:!0,responsive:"","head-variant":"light",id:"table-transition-example","tbody-transition-props":e.transProps,hover:"","show-empty":"",selectable:"",selectedVariant:"success",small:""},on:{filtered:e.onFiltered,"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"head(index)",fn:function(){return[n("span",{attrs:{"aria-hidden":"true"}},[n("b-form-checkbox",{attrs:{name:"check-button"},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[e._v("No.")])],1)]},proxy:!0},{key:"cell(index)",fn:function(data){return[data.rowSelected?n("b-form-checkbox",{attrs:{disabled:""},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("\n        "+e._s(data.index+1)+"\n      ")]):n("span",{attrs:{"aria-hidden":"true"}},[e._v(e._s(data.index+1))])]}},e._l(Object.keys(e.$scopedSlots),(function(slot){return{key:e.toCellName(slot),fn:function(t){return[e._t(slot,null,null,t)]}}}))],null,!0)}),e._v(" "),n("b-row",[n("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[n("b-pagination",{staticClass:"my-0",attrs:{"total-rows":0!==e.countRows&&e.countRows<e.totalRows?e.countRows:e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},573:function(e,t,n){"use strict";n.r(t);var r=n(0),l=n(23),o=(n(69),n(1),n(47),n(50),n(5),n(4),n(2),n(6),n(3),n(7),n(46));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={asyncData:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,t.next=3,Promise.all([n.dispatch("subordinate/getpengajuan",n.$auth.$state.user[0].id_user)]);case 3:return t.abrupt("return");case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{key:"id_pengajuan",actions:[{name:"Tambah",type:"link",link:"/pengajuan/subordinate/add",color:"btn btn-sm btn-outline-primary mt-1 ml-2"},{name:"Reset",type:"func",func:"reset",color:"btn btn-sm btn-outline-primary mt-1 ml-2"},{name:"Select All",type:"func",func:"selectAll",color:"btn btn-sm btn-outline-primary mt-1 ml-2"},{name:"Clear Selected",type:"func",func:"clearSelected",color:"btn btn-sm btn-outline-primary mt-1 ml-2"},{name:"Print",type:"func",func:"print",color:"btn btn-sm btn-outline-primary mt-1 ml-2"},{name:"Print Selected",type:"func",func:"printSelected",color:"btn btn-sm btn-outline-primary mt-1 ml-2"},{name:"Delete Selected",type:"func",func:"deleteSelected",color:"btn btn-sm btn-outline-primary mt-1 ml-2"}],fields:[{key:"fullname",label:"User"},{key:"kode_rkat",label:"Kode RKAT"},{key:"biaya_program",label:"Biaya Program"},{key:"periode_pencairan",label:"Periode Pencairan"},{key:"biaya_disetujui",label:"Biaya Disetujui"},{key:"created_at",label:"Tanggal Pengajuan"},"Actions"],items:[]}},computed:d(d({},Object(o.d)("subordinate",{pengajuan:function(e){return e.pengajuan}})),{},{rows:function(){return this.pengajuan.length}}),mounted:function(){this.items=this.pengajuan},methods:d(d({},Object(o.b)("subordinate",["getpengajuan","deletepengajuan"])),{},{rowClass:function(e,t){if(e&&"row"===t)return 0===e.status_message?"table-success":void 0},destroypengajuan:function(e){var t=this;this.$swal({title:"Warning!",text:"Yakin menghapus pengajuan?",icon:"warning",width:300,showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"OK, Hapus!"}).then((function(n){n.isConfirmed&&t.deletepengajuan(e.item.id_pengajuan).then((function(){t.$swal({width:300,icon:"success",title:"Congrats!",text:"Data telah dihapus"}),t.reload()})).catch((function(){t.$swal({width:300,icon:"error",title:"Oops...",text:"Server error atau cek koneksi anda"})}))}))},deleteAll:function(){var e=this;this.$swal({title:"Warning!",text:"Hapus semua pengajuan?",icon:"warning",width:300,showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"OK!"}).then((function(t){t.isConfirmed&&e.$axios.get("/pengajuan/destroy/".concat(e.$store.state.auth.user[0].id_user)).then(Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$swal({width:300,icon:"success",title:"Congrats!",text:"Semua pengajuan telah dihapus"});case 2:return t.next=4,e.reload();case 4:case"end":return t.stop()}}),t)})))).catch((function(){e.$swal({width:300,icon:"error",title:"Oops...",text:"Cek server atau koneksi anda"})}))}))},print:function(e){var t=this;this.$axios.post("/pengajuan/pdfByUSer/"+this.$store.state.auth.user[0].id_user,e).then((function(){window.open("https://aperkat.uts.ac.id/api/g/"+btoa(t.$store.state.auth.user[0].id_user))}))},deleteRows:function(e){var t=this;this.$swal({title:"Warning!",text:"Yakin menghapus pengajuan terpilih?",icon:"warning",width:300,showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"OK"}).then((function(n){n.isConfirmed&&t.$axios.post("/pengajuan/deleteRows",e).then(Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$swal({width:300,icon:"success",title:"Congrats!",text:"Pengajuan telah dihapus"});case 2:return e.next=4,t.reload();case 4:case"end":return e.stop()}}),e)})))).catch((function(){t.$swal({width:300,icon:"error",title:"Oops...",text:"Please check your server or internet connection"})}))}))},reload:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nuxt.refresh();case 2:return t.next=4,e.$refs.table.reload(e.pengajuan);case 4:case"end":return t.stop()}}),t)})))()}})},m=n(44),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-xl-12 col-lg-12"},[n("div",{staticClass:"card shadow mb-4"},[e._m(0),e._v(" "),n("div",{staticClass:"card-body"},[n("custom-table",{ref:"table",attrs:{items:e.items,fields:e.fields,html:e.key,actions:e.actions},scopedSlots:e._u([{key:"fullname",fn:function(t){return[n("p",{staticClass:"m-0 p-0"},[e._v(e._s(e._f("capitalize")(t.item.fullname)))]),e._v(" "),n("b-badge",{staticClass:"m-0",attrs:{variant:e._f("validasiStatus")(t.item.validasi_status)}},[e._v("\n              "+e._s(e._f("validasiDetail")(t.item.validasi_status))+"\n              "+e._s(t.item.nama_status)+"\n            ")])]}},{key:"nama_struktur",fn:function(t){return["0"!==t.item.nama_struktur&&"0"==t.item.nama_struktur_child1&&"0"==t.item.nama_struktur_child2?n("p",{staticClass:"text-uppercase"},[e._v("\n              "+e._s(t.item.nama_struktur)+"\n            ")]):e._e(),e._v(" "),"0"!==t.item.nama_struktur&&"0"!==t.item.nama_struktur_child1&&"0"==t.item.nama_struktur_child2?n("p",{staticClass:"text-uppercase"},[e._v("\n              "+e._s(t.item.nama_struktur)+"\n            ")]):e._e(),e._v(" "),"0"!==t.item.nama_struktur&&"0"!==t.item.nama_struktur_child1&&"0"!==t.item.nama_struktur_child2?n("p",{staticClass:"text-uppercase"},[e._v("\n              "+e._s(t.item.nama_struktur_child1)+"\n            ")]):e._e()]}},{key:"periode_pencairan",fn:function(t){return[n("p",[e._v("\n              "+e._s(e._f("capitalize")(t.item.periode_pencairan?t.item.periode_pencairan.period:"Sedang diperiksa"))+"\n            ")])]}},{key:"biaya_program",fn:function(t){return[n("p",[e._v("Rp. "+e._s(e._f("currency")(t.item.biaya_program)))])]}},{key:"biaya_disetujui",fn:function(t){return[n("p",[e._v("Rp. "+e._s(e._f("currency")(t.item.biaya_disetujui)))])]}},{key:"created_at",fn:function(t){return[n("p",[e._v(e._s(e._f("convertDate")(t.item.created_at)))])]}},{key:"actions",fn:function(t){return[n("NuxtLink",{key:"edit"+t.index,staticClass:"btn btn-sm btn-outline-info mt-1",attrs:{to:"edit/"+t.item.id_pengajuan}},[e._v("Detail")]),e._v(" "),n("button",{staticClass:"btn btn-sm btn-outline-danger mt-1",on:{click:function(n){return e.deleteRows(t.item.id_pengajuan)}}},[e._v("\n              Hapus\n            ")])]}}])})],1)])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[n("h6",{staticClass:"m-0 font-weight-bold text-primary"},[e._v("Pengajuan")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{CustomTable:n(352).default})}}]);